project:
  type: book
  output-dir: docs
  execute-dir: project
  
lang: zh

execute:
  enabled: true
  cache: true
  freeze: auto
  warning: false
  engine: knitr

book:
  title: "现代预测建模：从回归到机器学习"
  author: "李世纪"
  date: "2025-11-26"

  chapters: 
    - intro.qmd 
    - index.qmd
    - part: I 数据与模型
      chapters:
        - chapters/1线性回归.qmd
        - chapters/2横截面数据分析.qmd
        - chapters/3面板数据模型.qmd
        - chapters/4时间序列分析.qmd
        - chapters/5离散与受限因变量模型.qmd
    - part: II 因果推断方法
      chapters:
        - chapters/6因果推断框架.qmd
        - chapters/7工具变量法.qmd
        - chapters/8倾向得分匹配.qmd
        - chapters/9双重差分法.qmd
        - chapters/10断点回归.qmd
        - chapters/11合成控制法.qmd
        - chapters/12回归控制法.qmd
        - chapters/13中介效应与调节效应.qmd
    - part: III 理论与算法
      chapters:
        - chapters/14大样本理论.qmd
        - chapters/15最大似然估计法.qmd
        - chapters/16广义矩估计法.qmd
        - chapters/17蒙特卡洛法与自助法.qmd
        - chapters/18优化算法与数值方法.qmd
        - chapters/19机器学习在计量中的应用.qmd

bibliography: references.bib

format:
  html:
    toc: true
    toc-depth: 3
    theme: cosmo
    code-link: true
    code-line-numbers: true
    number-sections: true
    css: textbook.css
    
  docx:
    toc: true
    toc-depth: 3
    number-sections: true
    
  pdf:
    documentclass: ctexbook
    classoption: ["openany"]
    
    # 禁用 ctex 默认字体，使用 fontspec/xeCJK 手动控制
    ctex: false
    
    # 西文字体回退：Windows → Linux 开源
    mainfont: "Times New Roman, Liberation Serif, Noto Serif, serif"
    sansfont: "Arial, Liberation Sans, Noto Sans, sans-serif"
    monofont: "Consolas, JetBrains Mono, Liberation Mono, monospace"
    
    include-in-header:
      text: |
        \usepackage{xeCJK}
        
        % 中文字体回退：Windows 字体优先，Linux 开源字体回退
        % 宋体（正文）：Windows SimSun → Linux Noto Serif CJK
        \setCJKmainfont{SimSun}[
          BoldFont=SimHei,
          ItalicFont=KaiTi,
          BoldItalicFont=SimHei,
          AlternateFont={Noto Serif CJK SC}
        ]
        
        % 黑体（标题）：Windows SimHei → Linux Noto Sans CJK
        \setCJKsansfont{SimHei}[
          BoldFont=SimHei,
          AlternateFont={Noto Sans CJK SC}
        ]
        
        % 等宽中文：Windows FangSong → Linux Noto Sans Mono CJK
        \setCJKmonofont{FangSong}[
          AlternateFont={Noto Sans Mono CJK SC}
        ]
    
    toc-depth: 3
    geometry:
      - top=2.5cm
      - bottom=2.5cm
      - left=3cm
      - right=2.5cm
      - headheight=15pt
    fontsize: 11pt
    linestretch: 1.4
    pdf-engine: xelatex
    number-sections: true
    code-block-bg: "#f8f9fa"
    code-block-border-left: "#5c5c5c"
    highlight-style: tango

editor: source

crossref:
  chapters: true
  fig-title: "图"
  tbl-title: "表"
  fig-prefix: "图"
  tbl-prefix: "表"
  sec-prefix: "节"



